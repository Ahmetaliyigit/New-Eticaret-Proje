@model List<Category>
@{

}



<div class="container-fluid pt-5">
    <div class="row px-xl-5 pb-3">
        @foreach(var item in Model)
        {
            
    // item.Url çeşitli formatlarda olabilir: "filename.png" veya "img/filename.png" veya "/img/filename.png" veya "/img/20250829...png"
    // Bu kod hepsini tek doğru path'e çevirir.
    string src = item?.Url ?? "";
    if (string.IsNullOrWhiteSpace(src))
    {
        src = "/img/default.png"; // varsa placeholder; yoksa kendi default'unu koy
    }
    else
    {
        // Eğer zaten başında slash yoksa düzelt
        if (!src.StartsWith("/"))
            src = (src.StartsWith("img/") ? "/" + src : "/img/" + src);
        // Eğer "//img/..." gibi çift slash oluşursa Url.Content düzgün çözecektir ama biz yine normalize ettik.
    }

            <div class="col-lg-4 col-md-6 pb-1">
            <div class="cat-item d-flex flex-column border mb-4" style="padding: 30px;">
                <p class="text-right">@item.Products.Count()</p>
                <a href="/Home/Shop/@item.Id" class="cat-img position-relative overflow-hidden mb-3">
                    <img class="img-fluid" 
        src="@(Url.Content(src))" 
        alt="@item.CategoryName"
        style="width:100%; height:100%; object-fit:cover; display:block;" />>
                </a>
                <h5 class="font-weight-semi-bold m-0">@item.CategoryName</h5>
            </div>
        </div>
        }
    </div>
</div> 